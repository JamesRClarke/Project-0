"use strict";console.log("JS Loaded"),$(function(){function e(){var e=[Math.floor(Math.random()*w.length)],t=w[e];return w.splice(e,1),t}function t(e){return e.split("").sort(function(){return.5-Math.random()}).join("")}function a(){var e=$('<p class="anagram"></p>'),t=Math.ceil(600*Math.random());return e.css({left:t}),e}function o(){var o=e(),r=t(o),n=a();n.text(r),n.attr("data-word",o),p.append(n),u=setInterval(function(){n.css("top","+=10px"),console.log(Math.round(n.position().top))},2e3)}function r(){var o=e(),r=t(o),n=a();n.text(r),n.attr("data-word",o),p.append(n),u=setInterval(function(){n.css("top","+=20px")},2e3)}function n(){var o=e(),r=t(o),n=a();n.text(r),n.attr("data-word",o),p.append(n),u=setInterval(function(){n.css("top","+=20px")},1500)}function s(){var o=e(),r=t(o),n=a();n.text(r),n.attr("data-word",o),p.append(n),u=setInterval(function(){n.css("top","+=30px")},1e3)}function i(){l=5,h.html("Lives: 5"),c=0,m.html("Correct Answers: 0"),$(".anagram").remove()}var l=5,c=0,u=void 0,h=$("#lives"),d=$("#play"),m=$("#winCondition"),f=$("#subject-options"),b=$("#difficulty-options"),p=$(".ag-tetris"),v=$("#instructions"),y={BBT:["sheldon","leanord","spock","cheesecakefactory","howard","startrek","penny","koothrapoli","bernadette","physics","laundry","halonight","dumplings","brisket","nasa","stringtheory","darkmatter","comiccon","comicbook"],LOTR:["arragon","gimli"]},g="",w="";f.on("change",function(){var e=f.val();switch(w=y[e],e){case"BBT":$("body").addClass("imageBBT")}}),b.on("change",function(){switch(g=b.val()){case"easy":v.prepend("<h2>Instructions</h2><p> When a word falls to the bottom of the box you lose a life.<br><br>You need to guess 5 anagrams correctly to beat this game!<br><br>You have 5 lives...Enjoy!</p>");break;case"medium":v.append("<h2>Instructions</h2><p> When a word falls to the bottom of the box you lose a life.<br><br>You need to guess 7 anagrams correctly to beat this game!<br><br>You have 5 lives...Enjoy!</p>");break;case"hard":v.append("<h2>Instructions</h2><p> When a word falls to the bottom of the box you lose a life.<br><br>You need to guess 10 anagrams correctly to beat this game!<br><br>You have 5 lives...Enjoy!</p>");break;case"insane":v.append("<h2>Instructions</h2><p> When a word falls to the bottom of the box you lose a life.<br><br>You need to guess  anagrams correctly to beat this game!<br><br>You have 10 lives...Enjoy!</p>")}}),$("form").on("submit",function(e){e.preventDefault(),$(".anagram").each(function(){var e=$(this).data("word");$("#answer").val()===e?(m.html("Correct Answers: "+(c+=1)),$(this).addClass("animated fadeOutLeft").css("color","green"),$(this).css("display","hidden")):$(".anagram").addClass("animated wobble")}),$("form").trigger("reset")}),d.on("click",function(){switch(g){case"easy":o();var e=setInterval(function(){c>=5?(alert("You beat the game this time, can you manage a medium difficutly...?"),clearInterval(e),i()):l<=0?(alert("Game Over, sorry you lost, Booooooo!"),i()):o()},1e4);break;case"medium":r();var t=setInterval(function(){c>=7?(alert("You beat the game this time, can you manage a hard difficutly...?"),clearInterval(t),i()):l<=0?(alert("Game Over, sorry you lost, Booooooo!"),i()):r()},7e3);break;case"hard":n();var a=setInterval(function(){c>=10?(alert("You beat the game this time, well thats it, unless you really are insane..."),clearInterval(a),i()):l<=0?(alert("Game Over, sorry you lost, Booooooo!"),i()):n()},5e3);break;case"insane":s();var u=setInterval(function(){c>=10?(alert("You beat the game, like you beat it, beat it erm yeah, grats I guess"),clearInterval(u),i()):l<=0?(alert("Game Over, sorry you lost, Booooooo!"),i()):s()},2500);break;default:alert("Please select a difficulty...")}})});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyJdLCJuYW1lcyI6WyJjb25zb2xlIiwibG9nIiwiJCIsImdlbmVyYXRlV29yZCIsImluZGV4IiwiTWF0aCIsImZsb29yIiwicmFuZG9tIiwic2VsZWN0ZWRTdWJqZWN0IiwibGVuZ3RoIiwic2VsZWN0ZWRXb3JkIiwiZ2VuZXJhdGVBbmFncmFtIiwic3BsaXQiLCJzb3J0Iiwiam9pbiIsImdlbmVyYXRlQW5hZ3JhbUVsZW1lbnQiLCIkYW5hZ3JhbSIsImxlZnQiLCJkaWZmaWN1bHR5RWFzeSIsInNjcmFtYmxlZFdvcmQiLCJzZWxlY3RlZEFuYWdyYW0iLCJ0ZXh0IiwiJGNvbnRhaW5lciIsImludGVydmFsIiwic2V0SW50ZXJ2YWwiLCJwb3NpdGlvbiIsInRvcCIsImRpZmZpY3VsdHlNZWRpdW0iLCJkaWZmaWN1bHR5SGFyZCIsImRpZmZpY3VsdHlJbnNhbmUiLCJhdHRyIiwiY3NzIiwicmVzZXQiLCJsaWZlU2NvcmUiLCJ3aW5Db25kaXRpb24iLCIkd2luQ29uZGl0aW9uIiwiaHRtbCIsIiRsaXZlcyIsIiRkaWZmaWN1bHR5T3B0aW9ucyIsIiRpbnN0cnVjdGlvbnMiLCJCQlQiLCJMT1RSIiwiY2F0ZWdvcmllcyIsInNlbGVjdGVkRGlmZmljdWx0eSIsIiRzdWJqZWN0T3B0aW9ucyIsInZhbCIsInZhbHVlIiwib24iLCJhcHBlbmQiLCJlIiwicHJldmVudERlZmF1bHQiLCJlYWNoIiwiY2hlY2tlciIsInRoaXMiLCJkYXRhIiwiYWRkQ2xhc3MiLCJ0cmlnZ2VyIiwiJHBsYXlHYW1lIiwiaW50ZXJ2YWxFIiwiYWxlcnQiLCJjbGVhckludGVydmFsIiwiaW50ZXJ2YWxNIiwiaW50ZXJ2YWxIIiwiaW50ZXJ2YWxJIl0sIm1hcHBpbmdzIjoiWUFBQUEsU0FBUUMsSUFBSSxhQUNaQyxFQUFFLFdBeUVBLFFBQVNDLEtBRFQsR0FBQUMsSUFBQUMsS0FBQUMsTUFBQUQsS0FBQUUsU0FBQUMsRUFBQUMsU0FDQUMsRUFBQUYsRUFBd0JKLEVBRXRCLE9BREFJ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Qm1ELE1BQUFDLEtBQVksT0FHekJwRCxHQUFFLFdBQVcyQyxRQUFVTyxHQUEzQmpCLEVBQUlDLEtBQUoscUJBQW1DRixHQUFBLElBQ2pDQyxFQUFBQSxNQUFBQSxTQUFjQyx3QkFBZEwsSUFBdUNHLFFBQUFBLFNBQ3ZDaEMsRUFBRW1ELE1BQU1FLElBQUFBLFVBQVMsV0FGbkJyRCxFQUFBLFlBS09xRCxTQUFBLHFCQUdSckQsRUFYRCxRQUFBc0QsUUFBQSxXQStCRkMsRUFBQVYsR0FBQSxRQUFBLFdBQ0FVLE9BQVVWLEdBQ1IsSUFBQSxPQUNFN0IsR0FDQUEsSUFBQUEsR0FBQUEsWUFBQUEsV0FDTXdDLEdBQVlsQyxHQUNoQm1DLE1BQUl6Qix1RUFDRnlCLGNBQU1ELEdBQ05FLEtBQ0E1QixHQUFBQSxHQUNEMkIsTUFKRCx3Q0FLRUEsS0FJQXpDLEtBRUgsSUFDRCxNQUVBLEtBQUssU0FDTFMsR0FDQSxJQUFNa0MsR0FBWXJDLFlBQVksV0FDNUJVLEdBQUlBLEdBQ0Z5QixNQUFBQSxxRUFDQUMsY0FBQUEsR0FDQTVCLEtBQ0tDLEdBQUtBLEdBQ1YwQixNQUFBQSx3Q0FDQTNCLEtBSURMLEtBRUgsSUFBQSxNQUdBQyxLQUFBQSxPQUNBQSxHQUNFLElBQUFrQyxHQUFJNUIsWUFBcUIsV0FDdkJ5QixHQUFNLElBQ05DLE1BQUFBLCtFQUNBNUIsY0FBQUEsR0FDREEsS0FDT0MsR0FBQSxHQUNORCxNQUFBQSx3Q0FDREEsS0FSZUosS0FZaEIsSUFHRixNQUVBLEtBQUEsU0FDRUMsR0FDRThCLElBQUFBLEdBQU1uQyxZQUFBLFdBQ05vQyxHQUFjRyxJQUNkL0IsTUFBQUEsd0VBQ0Q0QixjQUFXM0IsR0FDVjBCLEtBQ0EzQixHQUFBQSxHQUNEMkIsTUFITSx3Q0FLTDlCLEtBR0pBLEtBRUE4QixLQXJFRixNQURGLFNBN0xGQSxNQUFBIiwiZmlsZSI6ImFwcC5qcyIsInNvdXJjZXNDb250ZW50IjpbImNvbnNvbGUubG9nKCdKUyBMb2FkZWQnKTtcbiQoKCkgPT4ge1xuICBsZXQgbGlmZVNjb3JlID0gNTtcbiAgLy8gbGV0IGN1cnJlbnRTY29yZURpc2xwYXllZCA9IDA7XG4gIGxldCB3aW5Db25kaXRpb24gPSAwO1xuICBsZXQgaW50ZXJ2YWw7XG4gIC8vIGNvbnN0ICRjdXJyZW50U2NvcmUgPSAkKCcjY3VycmVudFNjb3JlJyk7XG4gIGNvbnN0ICRsaXZlcyA9ICQoJyNsaXZlcycpO1xuICAvLyBjb25zdCAkaGlnaFNjb3JlID0gJCgnI2hpaGdoU2NvcmUnKTtcbiAgY29uc3QgJHBsYXlHYW1lID0gJCgnI3BsYXknKTtcbiAgY29uc3QgJHdpbkNvbmRpdGlvbiA9ICQoJyN3aW5Db25kaXRpb24nKTtcblxuICBjb25zdCAkc3ViamVjdE9wdGlvbnMgPSAkKCcjc3ViamVjdC1vcHRpb25zJyk7XG4gIGNvbnN0ICRkaWZmaWN1bHR5T3B0aW9ucyA9ICQoJyNkaWZmaWN1bHR5LW9wdGlvbnMnKTtcblxuICBjb25zdCAkY29udGFpbmVyID0gJCgnLmFnLXRldHJpcycpO1xuXG4gIGNvbnN0ICRpbnN0cnVjdGlvbnMgPSAkKCcjaW5zdHJ1Y3Rpb25zJyk7XG5cbiAgY29uc3QgY2F0ZWdvcmllcyA9IHtcbiAgICBCQlQ6IFsnc2hlbGRvbicsJ2xlYW5vcmQnLCdzcG9jaycsJ2NoZWVzZWNha2VmYWN0b3J5JywnaG93YXJkJywnc3RhcnRyZWsnLCdwZW5ueScsJ2tvb3RocmFwb2xpJywnYmVybmFkZXR0ZScsJ3BoeXNpY3MnLCdsYXVuZHJ5JywnaGFsb25pZ2h0JywnZHVtcGxpbmdzJywgJ2JyaXNrZXQnLCduYXNhJywnc3RyaW5ndGhlb3J5JywnZGFya21hdHRlcicsICdjb21pY2NvbicsJ2NvbWljYm9vayddLFxuICAgIExPVFI6IFsnYXJyYWdvbicsICdnaW1saSddXG4gIH07XG5cbiAgLy8vLy8vLy8vLy8vLy8vLy8vLy9TZWxlY3RvcnMvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbiAgbGV0IHNlbGVjdGVkRGlmZmljdWx0eSA9ICcnO1xuICBsZXQgc2VsZWN0ZWRTdWJqZWN0ID0gJyc7XG4gICRzdWJqZWN0T3B0aW9ucy5vbignY2hhbmdlJywgKCkgPT4ge1xuICAgIGNvbnN0IHZhbHVlID0gJHN1YmplY3RPcHRpb25zLnZhbCgpO1xuICAgIHNlbGVjdGVkU3ViamVjdCA9IGNhdGVnb3JpZXNbdmFsdWVdO1xuICAgIHN3aXRjaCAodmFsdWUpIHtcbiAgICAgIGNhc2UgJ0JCVCc6XG4gICAgICAkKCdib2R5JykuYWRkQ2xhc3MoJ2ltYWdlQkJUJyk7XG4gICAgICBicmVhaztcbiAgICAgIGNhc2UgJ0xPVFInOlxuXG4gICAgICBicmVhaztcbiAgICAgIGNhc2UgJ0FTSUEnOlxuXG4gICAgICBicmVhaztcbiAgICAgIGNhc2UgJ0VQTCc6XG5cbiAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnTE9UUic6XG5cbiAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnV0RJJzpcblxuICAgICAgYnJlYWs7XG4gICAgfVxuICB9KTtcbiAgJGRpZmZpY3VsdHlPcHRpb25zLm9uKCdjaGFuZ2UnLCAoKSA9PiB7XG4gICAgc2VsZWN0ZWREaWZmaWN1bHR5ID0gJGRpZmZpY3VsdHlPcHRpb25zLnZhbCgpO1xuICAgIHN3aXRjaCAoc2VsZWN0ZWREaWZmaWN1bHR5KSB7XG4gICAgICBjYXNlICdlYXN5JzpcbiAgICAgICRpbnN0cnVjdGlvbnMucHJlcGVuZCgnPGgyPkluc3RydWN0aW9uczwvaDI+PHA+IFdoZW4gYSB3b3JkIGZhbGxzIHRvIHRoZSBib3R0b20gb2YgdGhlIGJveCB5b3UgbG9zZSBhIGxpZmUuPGJyPjxicj5Zb3UgbmVlZCB0byBndWVzcyA1IGFuYWdyYW1zIGNvcnJlY3RseSB0byBiZWF0IHRoaXMgZ2FtZSE8YnI+PGJyPllvdSBoYXZlIDUgbGl2ZXMuLi5FbmpveSE8L3A+Jyk7XG4gICAgICBicmVhaztcbiAgICAgIGNhc2UgJ21lZGl1bSc6XG4gICAgICAkaW5zdHJ1Y3Rpb25zLmFwcGVuZCgnPGgyPkluc3RydWN0aW9uczwvaDI+PHA+IFdoZW4gYSB3b3JkIGZhbGxzIHRvIHRoZSBib3R0b20gb2YgdGhlIGJveCB5b3UgbG9zZSBhIGxpZmUuPGJyPjxicj5Zb3UgbmVlZCB0byBndWVzcyA3IGFuYWdyYW1zIGNvcnJlY3RseSB0byBiZWF0IHRoaXMgZ2FtZSE8YnI+PGJyPllvdSBoYXZlIDUgbGl2ZXMuLi5FbmpveSE8L3A+Jyk7XG4gICAgICBicmVhaztcbiAgICAgIGNhc2UgJ2hhcmQnOlxuICAgICAgJGluc3RydWN0aW9ucy5hcHBlbmQoJzxoMj5JbnN0cnVjdGlvbnM8L2gyPjxwPiBXaGVuIGEgd29yZCBmYWxscyB0byB0aGUgYm90dG9tIG9mIHRoZSBib3ggeW91IGxvc2UgYSBsaWZlLjxicj48YnI+WW91IG5lZWQgdG8gZ3Vlc3MgMTAgYW5hZ3JhbXMgY29ycmVjdGx5IHRvIGJlYXQgdGhpcyBnYW1lITxicj48YnI+WW91IGhhdmUgNSBsaXZlcy4uLkVuam95ITwvcD4nKTtcbiAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnaW5zYW5lJzpcbiAgICAgICRpbnN0cnVjdGlvbnMuYXBwZW5kKCc8aDI+SW5zdHJ1Y3Rpb25zPC9oMj48cD4gV2hlbiBhIHdvcmQgZmFsbHMgdG8gdGhlIGJvdHRvbSBvZiB0aGUgYm94IHlvdSBsb3NlIGEgbGlmZS48YnI+PGJyPllvdSBuZWVkIHRvIGd1ZXNzICBhbmFncmFtcyBjb3JyZWN0bHkgdG8gYmVhdCB0aGlzIGdhbWUhPGJyPjxicj5Zb3UgaGF2ZSAxMCBsaXZlcy4uLkVuam95ITwvcD4nKTtcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgfSk7XG5cbiAgLy8vLy8vLy8vLy8vLy8vLy8vLy9TZWxlY3RvcnMgRW5kLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG5cbiAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vL0Z1bmN0aW9ucyB0aGF0IGNoYW5nZSB0aGUgd29yZC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cblxuICAvLy8gVGhpcyBzZWxlY3RzIGEgcmFuZG9tIHdvcmQgZnJvbSB0aGUgc2VsZWN0ZWQgYXJyYXlcbiAgZnVuY3Rpb24gZ2VuZXJhdGVXb3JkKCkge1xuICAgIGNvbnN0IGluZGV4ID0gW01hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIHNlbGVjdGVkU3ViamVjdC5sZW5ndGgpXTtcbiAgICBjb25zdCBzZWxlY3RlZFdvcmQgPSBzZWxlY3RlZFN1YmplY3RbaW5kZXhdO1xuICAgIHNlbGVjdGVkU3ViamVjdC5zcGxpY2UoaW5kZXgsIDEpO1xuICAgIHJldHVybiBzZWxlY3RlZFdvcmQ7XG4gIH1cbiAgLy8vIFRoaXMgdGFrZXMgdGhlIHJhbmRvbWx5IHNlbGVjdGVkIHdvcmQgYW5kIHNodWZmbGVzIGl0IGludG8gYW4gYW5hZ3JhbVxuICBmdW5jdGlvbiBnZW5lcmF0ZUFuYWdyYW0oc2VsZWN0ZWRXb3JkKSB7XG4gICAgcmV0dXJuIHNlbGVjdGVkV29yZC5zcGxpdCgnJykuc29ydChmdW5jdGlvbigpe1xuICAgICAgcmV0dXJuIDAuNSAtIE1hdGgucmFuZG9tKCk7XG4gICAgfSApLmpvaW4oJycpO1xuICB9XG4gIC8vLyBUaGlzIGdlbmVyYXRlcyBhIGRpZmZlcmVudCBlbGVtZW50IGluIGEgZGlmZmVybnQgcG9zaXRpb24gZnJvbSB0aGUgSFRNTFxuICBmdW5jdGlvbiBnZW5lcmF0ZUFuYWdyYW1FbGVtZW50ICgpIHtcbiAgICBjb25zdCAkYW5hZ3JhbSA9ICQoJzxwIGNsYXNzPVwiYW5hZ3JhbVwiPjwvcD4nKTtcbiAgICBjb25zdCBsZWZ0ID0gTWF0aC5jZWlsKChNYXRoLnJhbmRvbSgpICogNjAwKSk7XG4gICAgJGFuYWdyYW0uY3NzKHtsZWZ0OiBsZWZ0fSk7XG4gICAgcmV0dXJuICRhbmFncmFtO1xuICB9XG4gIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy9GdW5jdGlvbnMgdGhhdCBjaGFuZ2UgdGhlIHdvcmQvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG5cbiAgLy8vLy8vLy8vLy8vLy8vIFRoZXNlIGFyZSB0aGUgZGlmZmljdWx0eSBvcHRpb24gZnVuY3Rpb25zIC8vLy8vLy8vLy8vLy8vL1xuICBmdW5jdGlvbiBkaWZmaWN1bHR5RWFzeSAoKXtcbiAgICBjb25zdCBzZWxlY3RlZFdvcmQgPSBnZW5lcmF0ZVdvcmQoKTtcbiAgICBjb25zdCBzY3JhbWJsZWRXb3JkID0gZ2VuZXJhdGVBbmFncmFtKHNlbGVjdGVkV29yZCk7XG4gICAgY29uc3Qgc2VsZWN0ZWRBbmFncmFtID0gZ2VuZXJhdGVBbmFncmFtRWxlbWVudCgpO1xuICAgIHNlbGVjdGVkQW5hZ3JhbS50ZXh0KHNjcmFtYmxlZFdvcmQpO1xuICAgIHNlbGVjdGVkQW5hZ3JhbS5hdHRyKCdkYXRhLXdvcmQnLCBzZWxlY3RlZFdvcmQpO1xuICAgICRjb250YWluZXIuYXBwZW5kKHNlbGVjdGVkQW5hZ3JhbSk7XG4gICAgaW50ZXJ2YWwgPSBzZXRJbnRlcnZhbChmdW5jdGlvbigpIHtcbiAgICAgIHNlbGVjdGVkQW5hZ3JhbS5jc3MoJ3RvcCcsICcrPTEwcHgnKTtcbiAgICAgIGNvbnNvbGUubG9nKE1hdGgucm91bmQoc2VsZWN0ZWRBbmFncmFtLnBvc2l0aW9uKCkudG9wKSk7XG4gICAgfSwyMDAwKTtcbiAgfVxuICBmdW5jdGlvbiBkaWZmaWN1bHR5TWVkaXVtICgpe1xuICAgIGNvbnN0IHNlbGVjdGVkV29yZCA9IGdlbmVyYXRlV29yZCgpO1xuICAgIGNvbnN0IHNjcmFtYmxlZFdvcmQgPSBnZW5lcmF0ZUFuYWdyYW0oc2VsZWN0ZWRXb3JkKTtcbiAgICBjb25zdCBzZWxlY3RlZEFuYWdyYW0gPSBnZW5lcmF0ZUFuYWdyYW1FbGVtZW50KCk7XG4gICAgc2VsZWN0ZWRBbmFncmFtLnRleHQoc2NyYW1ibGVkV29yZCk7XG4gICAgc2VsZWN0ZWRBbmFncmFtLmF0dHIoJ2RhdGEtd29yZCcsIHNlbGVjdGVkV29yZCk7XG4gICAgJGNvbnRhaW5lci5hcHBlbmQoc2VsZWN0ZWRBbmFncmFtKTtcbiAgICBpbnRlcnZhbCA9IHNldEludGVydmFsKGZ1bmN0aW9uKCkge1xuICAgICAgc2VsZWN0ZWRBbmFncmFtLmNzcygndG9wJywgJys9MjBweCcpO1xuICAgIH0sMjAwMCk7XG4gIH1cbiAgZnVuY3Rpb24gZGlmZmljdWx0eUhhcmQgKCl7XG4gICAgY29uc3Qgc2VsZWN0ZWRXb3JkID0gZ2VuZXJhdGVXb3JkKCk7XG4gICAgY29uc3Qgc2NyYW1ibGVkV29yZCA9IGdlbmVyYXRlQW5hZ3JhbShzZWxlY3RlZFdvcmQpO1xuICAgIGNvbnN0IHNlbGVjdGVkQW5hZ3JhbSA9IGdlbmVyYXRlQW5hZ3JhbUVsZW1lbnQoKTtcbiAgICBzZWxlY3RlZEFuYWdyYW0udGV4dChzY3JhbWJsZWRXb3JkKTtcbiAgICBzZWxlY3RlZEFuYWdyYW0uYXR0cignZGF0YS13b3JkJywgc2VsZWN0ZWRXb3JkKTtcbiAgICAkY29udGFpbmVyLmFwcGVuZChzZWxlY3RlZEFuYWdyYW0pO1xuICAgIGludGVydmFsID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24oKSB7XG4gICAgICBzZWxlY3RlZEFuYWdyYW0uY3NzKCd0b3AnLCAnKz0yMHB4Jyk7XG4gICAgfSwxNTAwKTtcbiAgfVxuICBmdW5jdGlvbiBkaWZmaWN1bHR5SW5zYW5lICgpe1xuICAgIGNvbnN0IHNlbGVjdGVkV29yZCA9IGdlbmVyYXRlV29yZCgpO1xuICAgIGNvbnN0IHNjcmFtYmxlZFdvcmQgPSBnZW5lcmF0ZUFuYWdyYW0oc2VsZWN0ZWRXb3JkKTtcbiAgICBjb25zdCBzZWxlY3RlZEFuYWdyYW0gPSBnZW5lcmF0ZUFuYWdyYW1FbGVtZW50KCk7XG5cbiAgICBzZWxlY3RlZEFuYWdyYW0udGV4dChzY3JhbWJsZWRXb3JkKTtcbiAgICBzZWxlY3RlZEFuYWdyYW0uYXR0cignZGF0YS13b3JkJywgc2VsZWN0ZWRXb3JkKTtcbiAgICAkY29udGFpbmVyLmFwcGVuZChzZWxlY3RlZEFuYWdyYW0pO1xuXG5cbiAgICBpbnRlcnZhbCA9IHNldEludGVydmFsKGZ1bmN0aW9uKCkge1xuICAgICAgLy8gY29uc3QgcG9zaXRpb24gPSBNYXRoLnJvdW5kKHNlbGVjdGVkQW5hZ3JhbS5wb3NpdGlvbigpLnRvcCk7XG4gICAgICAvLyBjb25zb2xlLmxvZyhwb3NpdGlvbik7XG4gICAgICAvL1xuICAgICAgLy8gaWYgKHBvc2l0aW9uIDw9IDU1MCkge1xuICAgICAgLy8gICBjb25zb2xlLmxvZygnbm9vb29vb29vb29vbycpO1xuICAgICAgLy8gICBsaWZlU2NvcmUgPSBsaWZlU2NvcmUgLSAxO1xuICAgICAgLy8gfVxuICAgICAgc2VsZWN0ZWRBbmFncmFtLmNzcygndG9wJywgJys9MzBweCcpO1xuICAgIH0sMTAwMCk7XG4gIH1cbiAgLy8vLy8vLy8vLy8vLy8vLy8vLy8gRGlmZmljdWx0eSBPcHRpb25zIEVuZCBoZXJlIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuXG5cbiAgLy8vIFRoaXMgaXMgdGhlIHZhbGlkYXRpb24gd2hlbiB0aGUgYnV0dG9uIGlzIGNsaWNrZWQgdG8gc3VibWl0IGFuIGFuc3dlciwgdGhpcyBhbHNvIGhvbGRzIHRoZSBhbmltYXRpb25zIGFwcGxpZWQgdG8gdGhlIGdhbWUuXG4gICQoJ2Zvcm0nKS5vbignc3VibWl0JywgZnVuY3Rpb24gKGUpIHtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICAkKCcuYW5hZ3JhbScpLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgY29uc3QgY2hlY2tlciA9ICQodGhpcykuZGF0YSgnd29yZCcpO1xuXG4gICAgICBpZiAoJCgnI2Fuc3dlcicpLnZhbCgpID09PSBjaGVja2VyKXtcbiAgICAgICAgJHdpbkNvbmRpdGlvbi5odG1sKGBDb3JyZWN0IEFuc3dlcnM6ICR7d2luQ29uZGl0aW9uID0gd2luQ29uZGl0aW9uICsgMX1gKTtcbiAgICAgICAgJCh0aGlzKS5hZGRDbGFzcygnYW5pbWF0ZWQgZmFkZU91dExlZnQnKS5jc3MoJ2NvbG9yJywnZ3JlZW4nKTtcbiAgICAgICAgJCh0aGlzKS5jc3MoJ2Rpc3BsYXknLCdoaWRkZW4nKTtcbiAgICAgICAgLy8gJGN1cnJlbnRTY29yZS5odG1sKGBTY29yZTogJHtjdXJyZW50U2NvcmVEaXNscGF5ZWQgKz0gNX1gKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgICQoJy5hbmFncmFtJykuYWRkQ2xhc3MoJ2FuaW1hdGVkIHdvYmJsZScpO1xuICAgICAgfVxuICAgIH0pO1xuICAgICQoJ2Zvcm0nKS50cmlnZ2VyKCdyZXNldCcpO1xuICB9KTtcblxuICAvLyBsZXQgaGlnaFNjb3JlID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2hpZ2hTY29yZScpIHx8IDA7XG4gIC8vIGZ1bmN0aW9uIHNldEhpZ2hTY29yZSAoJGhpZ2hTY29yZSkge1xuICAvLyAgIGhpZ2hTY29yZSA9IGN1cnJlbnRTY29yZURpc2xwYXllZCA+IGhpZ2hTY29yZSA/IGN1cnJlbnRTY29yZURpc2xwYXllZCA6IGhpZ2hTY29yZTtcbiAgLy8gICAkaGlnaFNjb3JlLnRleHQoJGhpZ2hTY29yZSk7XG4gIC8vIH1cbiAgZnVuY3Rpb24gcmVzZXQgKCkge1xuICAgIGxpZmVTY29yZSA9IDU7XG4gICAgJGxpdmVzLmh0bWwoJ0xpdmVzOiA1Jyk7XG4gICAgLy8gY3VycmVudFNjb3JlRGlzbHBheWVkID0gMDtcbiAgICAvLyAkY3VycmVudFNjb3JlLmh0bWwoYFNjb3JlOiAwYCk7XG4gICAgd2luQ29uZGl0aW9uID0gMDtcbiAgICAkd2luQ29uZGl0aW9uLmh0bWwoJ0NvcnJlY3QgQW5zd2VyczogMCcpO1xuICAgICQoJy5hbmFncmFtJykucmVtb3ZlKCk7XG4gICAgLy8gc2V0SGlnaFNjb3JlKCk7XG4gIH1cblxuICAvLy8gVGhpcyBpcyBmb3Igd2hlbiB0aGUgcGxheWVyIGlzIHJlYWR5IHRvIHBsYXksIGFmdGVyIHRoZSBkaWZmaWN1bHR5IGlzIHNlbGVjdGVkIGFuZCB0aGUgcGxheSBidXR0b24gaXMgY2xpY2tlZCAtIHNvIHRoaXMgc3RhcnRzIHRoZSBnYW1lIVxuICAkcGxheUdhbWUub24oJ2NsaWNrJywgZnVuY3Rpb24oKXtcbiAgICBzd2l0Y2ggKHNlbGVjdGVkRGlmZmljdWx0eSkge1xuICAgICAgY2FzZSAnZWFzeSc6XG4gICAgICBkaWZmaWN1bHR5RWFzeSgpO1xuICAgICAgY29uc3QgaW50ZXJ2YWxFID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24oKXtcbiAgICAgICAgaWYgKHdpbkNvbmRpdGlvbiA+PSA1KSB7XG4gICAgICAgICAgYWxlcnQoJ1lvdSBiZWF0IHRoZSBnYW1lIHRoaXMgdGltZSwgY2FuIHlvdSBtYW5hZ2UgYSBtZWRpdW0gZGlmZmljdXRseS4uLj8nKTtcbiAgICAgICAgICBjbGVhckludGVydmFsKGludGVydmFsRSk7XG4gICAgICAgICAgcmVzZXQoKTtcbiAgICAgICAgfSBlbHNlIGlmIChsaWZlU2NvcmUgPD0gMCkge1xuICAgICAgICAgIGFsZXJ0KCdHYW1lIE92ZXIsIHNvcnJ5IHlvdSBsb3N0LCBCb29vb29vbyEnKTtcbiAgICAgICAgICByZXNldCgpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgIGRpZmZpY3VsdHlFYXN5KCk7XG4gICAgICAgIH1cbiAgICAgIH0sMTAwMDApO1xuICAgICAgYnJlYWs7XG5cbiAgICAgIGNhc2UgJ21lZGl1bSc6XG4gICAgICBkaWZmaWN1bHR5TWVkaXVtKCk7XG4gICAgICBjb25zdCBpbnRlcnZhbE0gPSBzZXRJbnRlcnZhbChmdW5jdGlvbigpe1xuICAgICAgICBpZiAod2luQ29uZGl0aW9uID49IDcgKSB7XG4gICAgICAgICAgYWxlcnQoJ1lvdSBiZWF0IHRoZSBnYW1lIHRoaXMgdGltZSwgY2FuIHlvdSBtYW5hZ2UgYSBoYXJkIGRpZmZpY3V0bHkuLi4/Jyk7XG4gICAgICAgICAgY2xlYXJJbnRlcnZhbChpbnRlcnZhbE0pO1xuICAgICAgICAgIHJlc2V0KCk7XG4gICAgICAgIH0gZWxzZSBpZiAoIGxpZmVTY29yZSA8PSAwKXtcbiAgICAgICAgICBhbGVydCgnR2FtZSBPdmVyLCBzb3JyeSB5b3UgbG9zdCwgQm9vb29vb28hJyk7XG4gICAgICAgICAgcmVzZXQoKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICBkaWZmaWN1bHR5TWVkaXVtKCk7XG4gICAgICAgIH1cbiAgICAgIH0sNzAwMCk7XG4gICAgICBicmVhaztcblxuICAgICAgY2FzZSAnaGFyZCc6XG4gICAgICBkaWZmaWN1bHR5SGFyZCgpO1xuICAgICAgY29uc3QgaW50ZXJ2YWxIID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24oKXtcbiAgICAgICAgaWYgKHdpbkNvbmRpdGlvbiA+PSAxMCApIHtcbiAgICAgICAgICBhbGVydCgnWW91IGJlYXQgdGhlIGdhbWUgdGhpcyB0aW1lLCB3ZWxsIHRoYXRzIGl0LCB1bmxlc3MgeW91IHJlYWxseSBhcmUgaW5zYW5lLi4uJyk7XG4gICAgICAgICAgY2xlYXJJbnRlcnZhbChpbnRlcnZhbEgpO1xuICAgICAgICAgIHJlc2V0KCk7XG4gICAgICAgIH0gZWxzZSBpZiAoIGxpZmVTY29yZSA8PSAwKXtcbiAgICAgICAgICBhbGVydCgnR2FtZSBPdmVyLCBzb3JyeSB5b3UgbG9zdCwgQm9vb29vb28hJyk7XG4gICAgICAgICAgcmVzZXQoKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICBkaWZmaWN1bHR5SGFyZCgpO1xuICAgICAgICB9XG4gICAgICB9LDUwMDApO1xuICAgICAgYnJlYWs7XG5cbiAgICAgIGNhc2UgJ2luc2FuZSc6XG4gICAgICBkaWZmaWN1bHR5SW5zYW5lKCk7XG4gICAgICBjb25zdCBpbnRlcnZhbEkgPSBzZXRJbnRlcnZhbChmdW5jdGlvbigpe1xuICAgICAgICBpZiAod2luQ29uZGl0aW9uID49IDEwICkge1xuICAgICAgICAgIGFsZXJ0KCdZb3UgYmVhdCB0aGUgZ2FtZSwgbGlrZSB5b3UgYmVhdCBpdCwgYmVhdCBpdCBlcm0geWVhaCwgZ3JhdHMgSSBndWVzcycpO1xuICAgICAgICAgIGNsZWFySW50ZXJ2YWwoaW50ZXJ2YWxJKTtcbiAgICAgICAgICByZXNldCgpO1xuICAgICAgICB9IGVsc2UgaWYgKCBsaWZlU2NvcmUgPD0gMCl7XG4gICAgICAgICAgYWxlcnQoJ0dhbWUgT3Zlciwgc29ycnkgeW91IGxvc3QsIEJvb29vb29vIScpO1xuICAgICAgICAgIHJlc2V0KCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgZGlmZmljdWx0eUluc2FuZSgpO1xuICAgICAgICB9XG4gICAgICB9LDI1MDApO1xuICAgICAgYnJlYWs7XG4gICAgICBkZWZhdWx0OlxuICAgICAgYWxlcnQoJ1BsZWFzZSBzZWxlY3QgYSBkaWZmaWN1bHR5Li4uJyk7XG4gICAgfVxuICB9KTtcbn0pO1xuXG4vLy8vLyBsb3NlIGEgbGlmZSBmb3Igd29yZHMgZmFsbGluZyBvbiBib3R0b20gb2YgdGhlIGRpdiBwbGFjZSB0aGlzIGluIGEgZnVuY3Rpb24gYW5kIHRoZW4gY2FsbCBpdCBpbiBlYWNoIGRpZmZpY3VsdHlcbiJdfQ==
