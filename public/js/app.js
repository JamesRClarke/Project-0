"use strict";console.log("JS Loaded"),$(function(){function e(){var e=[Math.floor(Math.random()*k.length)],t=k[e];return k.splice(e,1),t}function t(e){return e.split("").sort(function(){return.5-Math.random()}).join("")}function a(){var e=$('<p class="anagram"></p>'),t=Math.ceil(600*Math.random());return e.css({left:t}),e}function o(){$(".anagram").each(function(){Math.round($(this).position().top)>=462&&(console.log("working"),d.html("Lives Left: "+(c-=1)),$(this).css("color","red"),$(this).addClass("animated hinge"))})}function r(){var r=e(),n=t(r),s=a();s.text(n),s.attr("data-word",r),v.append(s),o(),h=setInterval(function(){s.css("top","+=10px")},1500)}function n(){var r=e(),n=t(r),s=a();s.text(n),s.attr("data-word",r),v.append(s),o(),h=setInterval(function(){s.css("top","+=10px")},1e3)}function s(){var r=e(),n=t(r),s=a();s.text(n),s.attr("data-word",r),v.append(s),o(),h=setInterval(function(){s.css("top","+=10px")},700)}function i(){var r=e(),n=t(r),s=a();s.text(n),s.attr("data-word",r),v.append(s),o(),h=setInterval(function(){s.css("top","+=10px")},200)}function l(){c=5,d.html("Lives: 5"),u=0,f.html("Correct Answers: 0"),$(".anagram").remove()}var c=5,u=0,h=void 0,d=$("#lives"),m=$("#play"),f=$("#winCondition"),b=$("#subject-options"),p=$("#difficulty-options"),v=$(".ag-tetris"),g=$("#instructions"),y={BBT:["sheldon","leanord","spock","cheesecakefactory","howard","startrek","penny","koothrapoli","bernadette","physics","laundry","halonight","dumplings","brisket","nasa","stringtheory","darkmatter","comiccon","comicbook"],LOTR:["arragon","gimli"]},w="",k="";b.on("change",function(){var e=b.val();switch(k=y[e],e){case"BBT":$("body").addClass("imageBBT")}}),p.on("change",function(){switch(w=p.val()){case"easy":g.prepend("<h2>Instructions</h2><p> When a word falls to the bottom of the box you lose a life.<br><br>You need to guess 5 anagrams correctly to beat this game!<br><br>You have 5 lives...Enjoy!</p>");break;case"medium":g.append("<h2>Instructions</h2><p> When a word falls to the bottom of the box you lose a life.<br><br>You need to guess 7 anagrams correctly to beat this game!<br><br>You have 5 lives...Enjoy!</p>");break;case"hard":g.append("<h2>Instructions</h2><p> When a word falls to the bottom of the box you lose a life.<br><br>You need to guess 10 anagrams correctly to beat this game!<br><br>You have 5 lives...Enjoy!</p>");break;case"insane":g.append("<h2>Instructions</h2><p> When a word falls to the bottom of the box you lose a life.<br><br>You need to guess  anagrams correctly to beat this game!<br><br>You have 10 lives...Enjoy!</p>")}}),m.on("click",function(){switch(w){case"easy":r();var e=setInterval(function(){u>=5?(alert("You beat the game this time, can you manage a medium difficutly...?"),clearInterval(e),l()):c<=0?(alert("Game Over, sorry you lost, Booooooo!"),l()):r()},1e4);break;case"medium":n();var t=setInterval(function(){u>=7?(alert("You beat the game this time, can you manage a hard difficutly...?"),clearInterval(t),l()):c<=0?(alert("Game Over, sorry you lost, Booooooo!"),l()):n()},7e3);break;case"hard":s();var a=setInterval(function(){u>=10?(alert("You beat the game this time, well thats it, unless you really are insane..."),clearInterval(a),l()):c<=0?(alert("Game Over, sorry you lost, Booooooo!"),l()):s()},5e3);break;case"insane":i();var o=setInterval(function(){u>=10?(alert("You beat the game, like you beat it, beat it erm yeah, grats I guess"),clearInterval(o),l()):c<=0?(alert("Game Over, sorry you lost, Booooooo!"),l()):i()},2500);break;default:alert("Please select a difficulty...")}}),$("form").on("submit",function(e){e.preventDefault(),$(".anagram").each(function(){var e=$(this).data("word");$("#answer").val()===e?(f.html("Correct Answers: "+(u+=1)),$(this).addClass("animated fadeOutLeft").css("color","green"),$(this).css("display","hidden")):$(".anagram").addClass("animated wobble")}),$("form").trigger("reset")})});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyJdLCJuYW1lcyI6WyJjb25zb2xlIiwibG9nIiwiJCIsImdlbmVyYXRlV29yZCIsImluZGV4IiwiTWF0aCIsImZsb29yIiwicmFuZG9tIiwic2VsZWN0ZWRTdWJqZWN0IiwibGVuZ3RoIiwic2VsZWN0ZWRXb3JkIiwiZ2VuZXJhdGVBbmFncmFtIiwic3BsaXQiLCJzb3J0Iiwiam9pbiIsImdlbmVyYXRlQW5hZ3JhbUVsZW1lbnQiLCIkYW5hZ3JhbSIsImxlZnQiLCJlYWNoIiwiYW5hZ3JhbUhpdHNUaGVCb3R0b20iLCJ0aGlzIiwicG9zaXRpb24iLCJ0b3AiLCIkbGl2ZXMiLCJsaWZlU2NvcmUiLCJodG1sIiwiZGlmZmljdWx0eUVhc3kiLCJzY3JhbWJsZWRXb3JkIiwic2VsZWN0ZWRBbmFncmFtIiwidGV4dCIsImNzcyIsImludGVydmFsIiwiZGlmZmljdWx0eU1lZGl1bSIsImF0dHIiLCIkY29udGFpbmVyIiwiYXBwZW5kIiwiZGlmZmljdWx0eUhhcmQiLCJkaWZmaWN1bHR5SW5zYW5lIiwicmVzZXQiLCJ3aW5Db25kaXRpb24iLCIkd2luQ29uZGl0aW9uIiwiJGRpZmZpY3VsdHlPcHRpb25zIiwiJGluc3RydWN0aW9ucyIsIkJCVCIsIkxPVFIiLCJjYXRlZ29yaWVzIiwic2VsZWN0ZWREaWZmaWN1bHR5IiwiJHN1YmplY3RPcHRpb25zIiwidmFsIiwidmFsdWUiLCJvbiIsIiRwbGF5R2FtZSIsImFsZXJ0IiwiaW50ZXJ2YWxFIiwiY2xlYXJJbnRlcnZhbCIsImludGVydmFsTSIsInNldEludGVydmFsIiwiaW50ZXJ2YWxIIiwiaW50ZXJ2YWxJIiwiZSIsInByZXZlbnREZWZhdWx0IiwiY2hlY2tlciIsImRhdGEiLCJhZGRDbGFzcyIsInRyaWdnZXIiXSwibWFwcGluZ3MiOiJZQUFBQSxTQUFRQyxJQUFJLGFBQ1pDLEVBQUUsV0F5RUEsUUFBU0MsS0FEVCxHQUFBQyxJQUFBQyxLQUFBQyxNQUFBRCxLQUFBRSxTQUFBQyxFQUFBQyxTQUNBQyxFQUFBRixFQUF3QkosRUFFdEIsT0FEQUksR0FBZUgsT0FBQUQsRUFBZ0JHLEdBQ3pCRyxFQUdQLFFBQUFDLEdBQUFELEdBQ0QsTUFBQUEsR0FBQUUsTUFBQSxJQUFBQyxLQUFBLFdBQ0EsTUFBU0YsR0FBQUEsS0FBQUEsV0FDUEcsS0FBT0osSUFHUixRQUFBSyxLQUNELEdBQUFDLEdBQUFkLEVBQUEsMkJBQ0FlLEVBQVNGLEtBQUFBLEtBQTBCLElBQTFCQSxLQUFUUixTQUVFLE9BREFTLEdBQU1BLEtBQUFBLEtBQWFDLElBQ2JBLEVBRU4sUUFBT0QsS0FDUmQsRUFBQSxZQUFBZ0IsS0FBQSxXQUNRQyxLQUFBQSxNQUF3QmpCLEVBQUFrQixNQUFBQyxXQUFBQyxNQUMvQixNQUNFdEIsUUFBTXFCLElBQUFBLFdBQ05FLEVBQUlGLEtBQUosZ0JBQXFCRyxHQUFBLElBQ25CeEIsRUFBQUEsTUFBUUMsSUFBSSxRQUFBLE9BQ1pzQixFQUFBQSxNQUFPRSxTQUFQLHFCQVVOLFFBQVNDLEtBRFQsR0FBQWhCLEdBQUFQLElBQ0F3QixFQUFBaEIsRUFBMEJELEdBQ2xCQSxFQUFlUCxHQUNyQnlCLEdBQU1ELEtBQWdCaEIsR0FDdEJpQixFQUFNQSxLQUFBQSxZQUFrQmIsR0FDeEJhLEVBQUFBLE9BQWdCQyxHQUNoQkQsSUFFQVQsRUFBQUEsWUFBQUEsV0FHRVMsRUFBZ0JFLElBQUksTUFBTyxXQUQ3QkMsTUFFQyxRQUZVQyxLQUdaLEdBQUF0QixHQUFBUCxJQUNEd0IsRUFBU0ssRUFBbUJ0QixHQUNwQkEsRUFBZVAsR0FFckJ5QixHQUFNQSxLQUFBQSxHQUdOQSxFQUFnQkssS0FBSyxZQUFhdkIsR0FEbENrQixFQUFBQSxPQUFnQkMsR0FDaEJELElBQ0FNLEVBQVdDLFlBQU9QLFdBQ2xCVCxFQUFBQSxJQUFBQSxNQUFBQSxXQUNBWSxLQUVDLFFBRlVLLEtBR1osR0FBQTFCLEdBQUFQLElBQ0R3QixFQUFBaEIsRUFBMEJELEdBQ2xCQSxFQUFlUCxHQUVyQnlCLEdBQU1BLEtBQUFBLEdBR05BLEVBQWdCSyxLQUFLLFlBQWF2QixHQURsQ2tCLEVBQUFBLE9BQWdCQyxHQUNoQkQsSUFDQU0sRUFBV0MsWUFBT1AsV0FDbEJULEVBQUFBLElBQUFBLE1BQUFBLFdBQ0FZLEtBRUMsUUFGRE0sS0FHRCxHQUFBM0IsR0FBQVAsSUFDRHdCLEVBQVNVLEVBQW1CM0IsR0FDcEJBLEVBQWVQLEdBRXJCeUIsR0FBTUEsS0FBQUEsR0FHTkEsRUFBZ0JLLEtBQUssWUFBYXZCLEdBRGxDa0IsRUFBQUEsT0FBZ0JDLEdBQ2hCRCxJQUNBTSxFQUFXQyxZQUFPUCxXQUNsQlQsRUFBQUEsSUFBQUEsTUFBQUEsV0FDQVksS0FVRixRQUFBTyxLQUNBZCxFQUFBLEVBQ0FELEVBQVNlLEtBQVQsWUFHRUMsRUFBQSxFQUNBQyxFQUFBZixLQUFBLHNCQUNBYyxFQUFBQSxZQUFBQSxTQTdLSnZDLEdBQUFBLEdBQVksRUFFTndCLEVBQUosRUFDQU8sTUFBQUEsR0FFSUEsRUFBQUEsRUFBQUEsVUFFRVIsRUFBV3JCLEVBQUEsU0FDakJzQyxFQUFBdEMsRUFBQSxpQkFFTXNDLEVBQWtCdEMsRUFBQSxvQkFHbEJ1QyxFQUFxQnZDLEVBQUUsdUJBQXZCdUMsRUFBQUEsRUFBQUEsY0FFQVAsRUFBZWhDLEVBQUEsaUJBRWZ3QyxHQUdKQyxLQUFNLFVBQVUsVUFBVSxRQUFRLG9CQUFvQixTQUFTLFdBQVcsUUFBUSxjQUFjLGFBQWEsVUFBVSxVQUFVLFlBQVksWUFBYSxVQUFVLE9BQU8sZUFBZSxhQUFjLFdBQVcsYUFEck5DLE1BQU1DLFVBQWEsVUFNZkMsRUFBcUIsR0FEekJ0QyxFQUFBLEVBQ0F1QyxHQUFJRCxHQUFBQSxTQUFKLFdBQ0EsR0FBSXRDLEdBQUFBLEVBQUp3QyxLQUVFLFFBREZELEVBQW1CRixFQUFVSSxHQUNyQkEsR0FDTnpDLElBQUFBLE1BQ0FOLEVBQUEsUUFBUStDLFNBQVIsZUFBQVIsRUFBQVMsR0FBQSxTQUFBLFdBcUJGVCxPQXhCQUssRUFBQUwsRUFBQU8sT0F5QkVGLElBQUFBLE9BQ0FKLEVBQVFJLFFBQUFBLDZMQUNOLE1BQ0FKLEtBQUFBLFNBQ0FBLEVBQUFQLE9BQUEsNkxBQ0EsTUFDQU8sS0FBQUEsT0FDQUEsRUFBQVAsT0FBQSw4TEFDQSxNQUNBTyxLQUFBQSxTQUNBQSxFQUFBUCxPQUFBLGlNQXNISmdCLEVBQVVELEdBQUcsUUFBUyxXQUF0QkMsT0FBVUQsR0FHTixJQUFLLE9BRFB4QixHQUVFQSxJQUFBQSxHQUFBQSxZQUFBQSxXQUdNYSxHQUFnQixHQUR0QmEsTUFBTUMsdUVBQ0pDLGNBQUlmLEdBQ0ZhLEtBQ0FFLEdBQWNELEdBQ2RmLE1BQUFBLHdDQUNEQSxLQUdBWixLQUdBLElBQ0YsTUFHRCxLQUFLLFNBQUxNLEdBQ0FBLElBQUFBLEdBQUFBLFlBQUFBLFdBQ011QixHQUFZQyxHQUNoQkosTUFBSWIscUVBQ0ZhLGNBQU1HLEdBQ05ELEtBQ0FoQixHQUFBQSxHQUNEYyxNQUpELHdDQUtFQSxLQUlBcEIsS0FFSCxJQUNELE1BRUEsS0FBSyxPQUNMSSxHQUNBLElBQU1xQixHQUFZRCxZQUFZLFdBQzVCakIsR0FBSUEsSUFDRmEsTUFBQUEsK0VBQ0FFLGNBQUFBLEdBQ0FoQixLQUNLZCxHQUFLQSxHQUNWNEIsTUFBQUEsd0NBQ0FkLEtBSURGLEtBRUgsSUFBQSxNQUVBLEtBQUssU0FHTEMsR0FDRSxJQUFBcUIsR0FBSW5CLFlBQXFCLFdBQ3ZCYSxHQUFNLElBQ05FLE1BQUFBLHdFQUNBaEIsY0FBQUEsR0FDREEsS0FDT2QsR0FBQSxHQUNOYyxNQUFBQSx3Q0FDREEsS0FSZUQsS0FjbEIsS0FDQWUsTUF2RUYsU0FGRkEsTUFBQSxvQ0E4RUFsRCxFQUFFLFFBQVFnRCxHQUFHLFNBQVUsU0FBVVMsR0FHL0J6RCxFQUFFMEQsaUJBQUYxRCxFQUFFLFlBQVlnQixLQUFLLFdBR2pCLEdBQU0yQyxHQUFGM0QsRUFBYThDLE1BQWJjLEtBQXVCRCxPQUV2QjNELEdBQUEsV0FBTTZELFFBQVNGLEdBQ2pCM0QsRUFBWXVCLEtBQVp2QixxQkFBQXFDLEdBQUEsSUFDQXJDLEVBQUFrQixNQUFBMkMsU0FBQSx3QkFBQWpDLElBQUEsUUFBQSxTQUpGNUIsRUFBQWtCLE1BS09VLElBQUEsVUFBQSxXQVJUNUIsRUFBQSxZQUFBNkQsU0FBQSxxQkFwUUo3RCxFQUFBLFFBQUE4RCxRQUFBIiwiZmlsZSI6ImFwcC5qcyIsInNvdXJjZXNDb250ZW50IjpbImNvbnNvbGUubG9nKCdKUyBMb2FkZWQnKTtcbiQoKCkgPT4ge1xuICBsZXQgbGlmZVNjb3JlID0gNTtcbiAgLy8gbGV0IGN1cnJlbnRTY29yZURpc2xwYXllZCA9IDA7XG4gIGxldCB3aW5Db25kaXRpb24gPSAwO1xuICBsZXQgaW50ZXJ2YWw7XG4gIC8vIGNvbnN0ICRjdXJyZW50U2NvcmUgPSAkKCcjY3VycmVudFNjb3JlJyk7XG4gIGNvbnN0ICRsaXZlcyA9ICQoJyNsaXZlcycpO1xuICAvLyBjb25zdCAkaGlnaFNjb3JlID0gJCgnI2hpaGdoU2NvcmUnKTtcbiAgY29uc3QgJHBsYXlHYW1lID0gJCgnI3BsYXknKTtcbiAgY29uc3QgJHdpbkNvbmRpdGlvbiA9ICQoJyN3aW5Db25kaXRpb24nKTtcblxuICBjb25zdCAkc3ViamVjdE9wdGlvbnMgPSAkKCcjc3ViamVjdC1vcHRpb25zJyk7XG4gIGNvbnN0ICRkaWZmaWN1bHR5T3B0aW9ucyA9ICQoJyNkaWZmaWN1bHR5LW9wdGlvbnMnKTtcblxuICBjb25zdCAkY29udGFpbmVyID0gJCgnLmFnLXRldHJpcycpO1xuXG4gIGNvbnN0ICRpbnN0cnVjdGlvbnMgPSAkKCcjaW5zdHJ1Y3Rpb25zJyk7XG5cbiAgY29uc3QgY2F0ZWdvcmllcyA9IHtcbiAgICBCQlQ6IFsnc2hlbGRvbicsJ2xlYW5vcmQnLCdzcG9jaycsJ2NoZWVzZWNha2VmYWN0b3J5JywnaG93YXJkJywnc3RhcnRyZWsnLCdwZW5ueScsJ2tvb3RocmFwb2xpJywnYmVybmFkZXR0ZScsJ3BoeXNpY3MnLCdsYXVuZHJ5JywnaGFsb25pZ2h0JywnZHVtcGxpbmdzJywgJ2JyaXNrZXQnLCduYXNhJywnc3RyaW5ndGhlb3J5JywnZGFya21hdHRlcicsICdjb21pY2NvbicsJ2NvbWljYm9vayddLFxuICAgIExPVFI6IFsnYXJyYWdvbicsICdnaW1saSddXG4gIH07XG5cbiAgLy8vLy8vLy8vLy8vLy8vLy8vLy9TZWxlY3RvcnMvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbiAgbGV0IHNlbGVjdGVkRGlmZmljdWx0eSA9ICcnO1xuICBsZXQgc2VsZWN0ZWRTdWJqZWN0ID0gJyc7XG4gICRzdWJqZWN0T3B0aW9ucy5vbignY2hhbmdlJywgKCkgPT4ge1xuICAgIGNvbnN0IHZhbHVlID0gJHN1YmplY3RPcHRpb25zLnZhbCgpO1xuICAgIHNlbGVjdGVkU3ViamVjdCA9IGNhdGVnb3JpZXNbdmFsdWVdO1xuICAgIHN3aXRjaCAodmFsdWUpIHtcbiAgICAgIGNhc2UgJ0JCVCc6XG4gICAgICAkKCdib2R5JykuYWRkQ2xhc3MoJ2ltYWdlQkJUJyk7XG4gICAgICBicmVhaztcbiAgICAgIGNhc2UgJ0xPVFInOlxuXG4gICAgICBicmVhaztcbiAgICAgIGNhc2UgJ0NDJzpcblxuICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdFUEwnOlxuXG4gICAgICBicmVhaztcbiAgICAgIGNhc2UgJ0xPVFInOlxuXG4gICAgICBicmVhaztcbiAgICAgIGNhc2UgJ1dESSc6XG5cbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgfSk7XG4gICRkaWZmaWN1bHR5T3B0aW9ucy5vbignY2hhbmdlJywgKCkgPT4ge1xuICAgIHNlbGVjdGVkRGlmZmljdWx0eSA9ICRkaWZmaWN1bHR5T3B0aW9ucy52YWwoKTtcbiAgICBzd2l0Y2ggKHNlbGVjdGVkRGlmZmljdWx0eSkge1xuICAgICAgY2FzZSAnZWFzeSc6XG4gICAgICAkaW5zdHJ1Y3Rpb25zLnByZXBlbmQoJzxoMj5JbnN0cnVjdGlvbnM8L2gyPjxwPiBXaGVuIGEgd29yZCBmYWxscyB0byB0aGUgYm90dG9tIG9mIHRoZSBib3ggeW91IGxvc2UgYSBsaWZlLjxicj48YnI+WW91IG5lZWQgdG8gZ3Vlc3MgNSBhbmFncmFtcyBjb3JyZWN0bHkgdG8gYmVhdCB0aGlzIGdhbWUhPGJyPjxicj5Zb3UgaGF2ZSA1IGxpdmVzLi4uRW5qb3khPC9wPicpO1xuICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdtZWRpdW0nOlxuICAgICAgJGluc3RydWN0aW9ucy5hcHBlbmQoJzxoMj5JbnN0cnVjdGlvbnM8L2gyPjxwPiBXaGVuIGEgd29yZCBmYWxscyB0byB0aGUgYm90dG9tIG9mIHRoZSBib3ggeW91IGxvc2UgYSBsaWZlLjxicj48YnI+WW91IG5lZWQgdG8gZ3Vlc3MgNyBhbmFncmFtcyBjb3JyZWN0bHkgdG8gYmVhdCB0aGlzIGdhbWUhPGJyPjxicj5Zb3UgaGF2ZSA1IGxpdmVzLi4uRW5qb3khPC9wPicpO1xuICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdoYXJkJzpcbiAgICAgICRpbnN0cnVjdGlvbnMuYXBwZW5kKCc8aDI+SW5zdHJ1Y3Rpb25zPC9oMj48cD4gV2hlbiBhIHdvcmQgZmFsbHMgdG8gdGhlIGJvdHRvbSBvZiB0aGUgYm94IHlvdSBsb3NlIGEgbGlmZS48YnI+PGJyPllvdSBuZWVkIHRvIGd1ZXNzIDEwIGFuYWdyYW1zIGNvcnJlY3RseSB0byBiZWF0IHRoaXMgZ2FtZSE8YnI+PGJyPllvdSBoYXZlIDUgbGl2ZXMuLi5FbmpveSE8L3A+Jyk7XG4gICAgICBicmVhaztcbiAgICAgIGNhc2UgJ2luc2FuZSc6XG4gICAgICAkaW5zdHJ1Y3Rpb25zLmFwcGVuZCgnPGgyPkluc3RydWN0aW9uczwvaDI+PHA+IFdoZW4gYSB3b3JkIGZhbGxzIHRvIHRoZSBib3R0b20gb2YgdGhlIGJveCB5b3UgbG9zZSBhIGxpZmUuPGJyPjxicj5Zb3UgbmVlZCB0byBndWVzcyAgYW5hZ3JhbXMgY29ycmVjdGx5IHRvIGJlYXQgdGhpcyBnYW1lITxicj48YnI+WW91IGhhdmUgMTAgbGl2ZXMuLi5FbmpveSE8L3A+Jyk7XG4gICAgICBicmVhaztcbiAgICB9XG4gIH0pO1xuXG4gIC8vLy8vLy8vLy8vLy8vLy8vLy8vU2VsZWN0b3JzIEVuZC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuXG4gIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy9GdW5jdGlvbnMgdGhhdCBjaGFuZ2UgdGhlIHdvcmQvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG5cbiAgLy8vIFRoaXMgc2VsZWN0cyBhIHJhbmRvbSB3b3JkIGZyb20gdGhlIHNlbGVjdGVkIGFycmF5XG4gIGZ1bmN0aW9uIGdlbmVyYXRlV29yZCgpIHtcbiAgICBjb25zdCBpbmRleCA9IFtNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBzZWxlY3RlZFN1YmplY3QubGVuZ3RoKV07XG4gICAgY29uc3Qgc2VsZWN0ZWRXb3JkID0gc2VsZWN0ZWRTdWJqZWN0W2luZGV4XTtcbiAgICBzZWxlY3RlZFN1YmplY3Quc3BsaWNlKGluZGV4LCAxKTtcbiAgICByZXR1cm4gc2VsZWN0ZWRXb3JkO1xuICB9XG4gIC8vLyBUaGlzIHRha2VzIHRoZSByYW5kb21seSBzZWxlY3RlZCB3b3JkIGFuZCBzaHVmZmxlcyBpdCBpbnRvIGFuIGFuYWdyYW1cbiAgZnVuY3Rpb24gZ2VuZXJhdGVBbmFncmFtKHNlbGVjdGVkV29yZCkge1xuICAgIHJldHVybiBzZWxlY3RlZFdvcmQuc3BsaXQoJycpLnNvcnQoZnVuY3Rpb24oKXtcbiAgICAgIHJldHVybiAwLjUgLSBNYXRoLnJhbmRvbSgpO1xuICAgIH0gKS5qb2luKCcnKTtcbiAgfVxuICAvLy8gVGhpcyBnZW5lcmF0ZXMgYSBkaWZmZXJlbnQgZWxlbWVudCBpbiBhIGRpZmZlcm50IHBvc2l0aW9uIGZyb20gdGhlIEhUTUxcbiAgZnVuY3Rpb24gZ2VuZXJhdGVBbmFncmFtRWxlbWVudCAoKSB7XG4gICAgY29uc3QgJGFuYWdyYW0gPSAkKCc8cCBjbGFzcz1cImFuYWdyYW1cIj48L3A+Jyk7XG4gICAgY29uc3QgbGVmdCA9IE1hdGguY2VpbCgoTWF0aC5yYW5kb20oKSAqIDYwMCkpO1xuICAgICRhbmFncmFtLmNzcyh7bGVmdDogbGVmdH0pO1xuICAgIHJldHVybiAkYW5hZ3JhbTtcbiAgfVxuICBmdW5jdGlvbiBhbmFncmFtSGl0c1RoZUJvdHRvbSAoKSB7XG4gICAgJCgnLmFuYWdyYW0nKS5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgIGNvbnN0IHBvc2l0aW9uID0gTWF0aC5yb3VuZCgkKHRoaXMpLnBvc2l0aW9uKCkudG9wKTtcbiAgICAgIGlmIChwb3NpdGlvbiA+PSA0NjIpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ3dvcmtpbmcnKTtcbiAgICAgICAgJGxpdmVzLmh0bWwoYExpdmVzIExlZnQ6ICR7bGlmZVNjb3JlID0gbGlmZVNjb3JlIC0gMX1gKTtcbiAgICAgICAgJCh0aGlzKS5jc3MoJ2NvbG9yJywncmVkJyk7XG4gICAgICAgICQodGhpcykuYWRkQ2xhc3MoJ2FuaW1hdGVkIGhpbmdlJyk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vRnVuY3Rpb25zIHRoYXQgY2hhbmdlIHRoZSB3b3JkLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuXG4gIC8vLy8vLy8vLy8vLy8vLyBUaGVzZSBhcmUgdGhlIGRpZmZpY3VsdHkgb3B0aW9uIGZ1bmN0aW9ucyAvLy8vLy8vLy8vLy8vLy9cbiAgZnVuY3Rpb24gZGlmZmljdWx0eUVhc3kgKCl7XG4gICAgY29uc3Qgc2VsZWN0ZWRXb3JkID0gZ2VuZXJhdGVXb3JkKCk7XG4gICAgY29uc3Qgc2NyYW1ibGVkV29yZCA9IGdlbmVyYXRlQW5hZ3JhbShzZWxlY3RlZFdvcmQpO1xuICAgIGNvbnN0IHNlbGVjdGVkQW5hZ3JhbSA9IGdlbmVyYXRlQW5hZ3JhbUVsZW1lbnQoKTtcbiAgICBzZWxlY3RlZEFuYWdyYW0udGV4dChzY3JhbWJsZWRXb3JkKTtcbiAgICBzZWxlY3RlZEFuYWdyYW0uYXR0cignZGF0YS13b3JkJywgc2VsZWN0ZWRXb3JkKTtcbiAgICAkY29udGFpbmVyLmFwcGVuZChzZWxlY3RlZEFuYWdyYW0pO1xuICAgIGFuYWdyYW1IaXRzVGhlQm90dG9tKCk7XG5cbiAgICBpbnRlcnZhbCA9IHNldEludGVydmFsKGZ1bmN0aW9uKCkge1xuICAgICAgc2VsZWN0ZWRBbmFncmFtLmNzcygndG9wJywgJys9MTBweCcpO1xuICAgIH0sMTUwMCk7XG4gIH1cbiAgZnVuY3Rpb24gZGlmZmljdWx0eU1lZGl1bSAoKXtcbiAgICBjb25zdCBzZWxlY3RlZFdvcmQgPSBnZW5lcmF0ZVdvcmQoKTtcbiAgICBjb25zdCBzY3JhbWJsZWRXb3JkID0gZ2VuZXJhdGVBbmFncmFtKHNlbGVjdGVkV29yZCk7XG4gICAgY29uc3Qgc2VsZWN0ZWRBbmFncmFtID0gZ2VuZXJhdGVBbmFncmFtRWxlbWVudCgpO1xuXG4gICAgc2VsZWN0ZWRBbmFncmFtLnRleHQoc2NyYW1ibGVkV29yZCk7XG4gICAgc2VsZWN0ZWRBbmFncmFtLmF0dHIoJ2RhdGEtd29yZCcsIHNlbGVjdGVkV29yZCk7XG4gICAgJGNvbnRhaW5lci5hcHBlbmQoc2VsZWN0ZWRBbmFncmFtKTtcbiAgICBhbmFncmFtSGl0c1RoZUJvdHRvbSgpO1xuICAgIGludGVydmFsID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24oKSB7XG4gICAgICBzZWxlY3RlZEFuYWdyYW0uY3NzKCd0b3AnLCAnKz0xMHB4Jyk7XG4gICAgfSwxMDAwKTtcbiAgfVxuICBmdW5jdGlvbiBkaWZmaWN1bHR5SGFyZCAoKXtcbiAgICBjb25zdCBzZWxlY3RlZFdvcmQgPSBnZW5lcmF0ZVdvcmQoKTtcbiAgICBjb25zdCBzY3JhbWJsZWRXb3JkID0gZ2VuZXJhdGVBbmFncmFtKHNlbGVjdGVkV29yZCk7XG4gICAgY29uc3Qgc2VsZWN0ZWRBbmFncmFtID0gZ2VuZXJhdGVBbmFncmFtRWxlbWVudCgpO1xuXG4gICAgc2VsZWN0ZWRBbmFncmFtLnRleHQoc2NyYW1ibGVkV29yZCk7XG4gICAgc2VsZWN0ZWRBbmFncmFtLmF0dHIoJ2RhdGEtd29yZCcsIHNlbGVjdGVkV29yZCk7XG4gICAgJGNvbnRhaW5lci5hcHBlbmQoc2VsZWN0ZWRBbmFncmFtKTtcbiAgICBhbmFncmFtSGl0c1RoZUJvdHRvbSgpO1xuICAgIGludGVydmFsID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24oKSB7XG4gICAgICBzZWxlY3RlZEFuYWdyYW0uY3NzKCd0b3AnLCAnKz0xMHB4Jyk7XG4gICAgfSw3MDApO1xuICB9XG4gIGZ1bmN0aW9uIGRpZmZpY3VsdHlJbnNhbmUgKCl7XG4gICAgY29uc3Qgc2VsZWN0ZWRXb3JkID0gZ2VuZXJhdGVXb3JkKCk7XG4gICAgY29uc3Qgc2NyYW1ibGVkV29yZCA9IGdlbmVyYXRlQW5hZ3JhbShzZWxlY3RlZFdvcmQpO1xuICAgIGNvbnN0IHNlbGVjdGVkQW5hZ3JhbSA9IGdlbmVyYXRlQW5hZ3JhbUVsZW1lbnQoKTtcblxuICAgIHNlbGVjdGVkQW5hZ3JhbS50ZXh0KHNjcmFtYmxlZFdvcmQpO1xuICAgIHNlbGVjdGVkQW5hZ3JhbS5hdHRyKCdkYXRhLXdvcmQnLCBzZWxlY3RlZFdvcmQpO1xuICAgICRjb250YWluZXIuYXBwZW5kKHNlbGVjdGVkQW5hZ3JhbSk7XG4gICAgYW5hZ3JhbUhpdHNUaGVCb3R0b20oKTtcbiAgICBpbnRlcnZhbCA9IHNldEludGVydmFsKGZ1bmN0aW9uKCkge1xuICAgICAgc2VsZWN0ZWRBbmFncmFtLmNzcygndG9wJywgJys9MTBweCcpO1xuICAgIH0sMjAwKTtcbiAgfVxuICAvLy8vLy8vLy8vLy8vLy8vLy8vLyBEaWZmaWN1bHR5IE9wdGlvbnMgRW5kIGhlcmUgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG5cblxuICAvLyBsZXQgaGlnaFNjb3JlID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2hpZ2hTY29yZScpIHx8IDA7XG4gIC8vIGZ1bmN0aW9uIHNldEhpZ2hTY29yZSAoJGhpZ2hTY29yZSkge1xuICAvLyAgIGhpZ2hTY29yZSA9IGN1cnJlbnRTY29yZURpc2xwYXllZCA+IGhpZ2hTY29yZSA/IGN1cnJlbnRTY29yZURpc2xwYXllZCA6IGhpZ2hTY29yZTtcbiAgLy8gICAkaGlnaFNjb3JlLnRleHQoJGhpZ2hTY29yZSk7XG4gIC8vIH1cbiAgZnVuY3Rpb24gcmVzZXQgKCkge1xuICAgIGxpZmVTY29yZSA9IDU7XG4gICAgJGxpdmVzLmh0bWwoJ0xpdmVzOiA1Jyk7XG4gICAgLy8gY3VycmVudFNjb3JlRGlzbHBheWVkID0gMDtcbiAgICAvLyAkY3VycmVudFNjb3JlLmh0bWwoYFNjb3JlOiAwYCk7XG4gICAgd2luQ29uZGl0aW9uID0gMDtcbiAgICAkd2luQ29uZGl0aW9uLmh0bWwoJ0NvcnJlY3QgQW5zd2VyczogMCcpO1xuICAgICQoJy5hbmFncmFtJykucmVtb3ZlKCk7XG4gICAgLy8gc2V0SGlnaFNjb3JlKCk7XG4gIH1cblxuICAvLy8gVGhpcyBpcyBmb3Igd2hlbiB0aGUgcGxheWVyIGlzIHJlYWR5IHRvIHBsYXksIGFmdGVyIHRoZSBkaWZmaWN1bHR5IGlzIHNlbGVjdGVkIGFuZCB0aGUgcGxheSBidXR0b24gaXMgY2xpY2tlZCAtIHNvIHRoaXMgc3RhcnRzIHRoZSBnYW1lIVxuICAkcGxheUdhbWUub24oJ2NsaWNrJywgZnVuY3Rpb24oKXtcblxuICAgIHN3aXRjaCAoc2VsZWN0ZWREaWZmaWN1bHR5KSB7XG4gICAgICBjYXNlICdlYXN5JzpcbiAgICAgIGRpZmZpY3VsdHlFYXN5KCk7XG5cbiAgICAgIGNvbnN0IGludGVydmFsRSA9IHNldEludGVydmFsKGZ1bmN0aW9uKCl7XG4gICAgICAgIGlmICh3aW5Db25kaXRpb24gPj0gNSkge1xuICAgICAgICAgIGFsZXJ0KCdZb3UgYmVhdCB0aGUgZ2FtZSB0aGlzIHRpbWUsIGNhbiB5b3UgbWFuYWdlIGEgbWVkaXVtIGRpZmZpY3V0bHkuLi4/Jyk7XG4gICAgICAgICAgY2xlYXJJbnRlcnZhbChpbnRlcnZhbEUpO1xuICAgICAgICAgIHJlc2V0KCk7XG4gICAgICAgIH0gZWxzZSBpZiAobGlmZVNjb3JlIDw9IDApIHtcbiAgICAgICAgICBhbGVydCgnR2FtZSBPdmVyLCBzb3JyeSB5b3UgbG9zdCwgQm9vb29vb28hJyk7XG4gICAgICAgICAgcmVzZXQoKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICBkaWZmaWN1bHR5RWFzeSgpO1xuICAgICAgICB9XG4gICAgICB9LDEwMDAwKTtcbiAgICAgIGJyZWFrO1xuXG4gICAgICBjYXNlICdtZWRpdW0nOlxuICAgICAgZGlmZmljdWx0eU1lZGl1bSgpO1xuICAgICAgY29uc3QgaW50ZXJ2YWxNID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24oKXtcbiAgICAgICAgaWYgKHdpbkNvbmRpdGlvbiA+PSA3ICkge1xuICAgICAgICAgIGFsZXJ0KCdZb3UgYmVhdCB0aGUgZ2FtZSB0aGlzIHRpbWUsIGNhbiB5b3UgbWFuYWdlIGEgaGFyZCBkaWZmaWN1dGx5Li4uPycpO1xuICAgICAgICAgIGNsZWFySW50ZXJ2YWwoaW50ZXJ2YWxNKTtcbiAgICAgICAgICByZXNldCgpO1xuICAgICAgICB9IGVsc2UgaWYgKCBsaWZlU2NvcmUgPD0gMCl7XG4gICAgICAgICAgYWxlcnQoJ0dhbWUgT3Zlciwgc29ycnkgeW91IGxvc3QsIEJvb29vb29vIScpO1xuICAgICAgICAgIHJlc2V0KCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgZGlmZmljdWx0eU1lZGl1bSgpO1xuICAgICAgICB9XG4gICAgICB9LDcwMDApO1xuICAgICAgYnJlYWs7XG5cbiAgICAgIGNhc2UgJ2hhcmQnOlxuICAgICAgZGlmZmljdWx0eUhhcmQoKTtcbiAgICAgIGNvbnN0IGludGVydmFsSCA9IHNldEludGVydmFsKGZ1bmN0aW9uKCl7XG4gICAgICAgIGlmICh3aW5Db25kaXRpb24gPj0gMTAgKSB7XG4gICAgICAgICAgYWxlcnQoJ1lvdSBiZWF0IHRoZSBnYW1lIHRoaXMgdGltZSwgd2VsbCB0aGF0cyBpdCwgdW5sZXNzIHlvdSByZWFsbHkgYXJlIGluc2FuZS4uLicpO1xuICAgICAgICAgIGNsZWFySW50ZXJ2YWwoaW50ZXJ2YWxIKTtcbiAgICAgICAgICByZXNldCgpO1xuICAgICAgICB9IGVsc2UgaWYgKCBsaWZlU2NvcmUgPD0gMCl7XG4gICAgICAgICAgYWxlcnQoJ0dhbWUgT3Zlciwgc29ycnkgeW91IGxvc3QsIEJvb29vb29vIScpO1xuICAgICAgICAgIHJlc2V0KCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgZGlmZmljdWx0eUhhcmQoKTtcbiAgICAgICAgfVxuICAgICAgfSw1MDAwKTtcbiAgICAgIGJyZWFrO1xuXG4gICAgICBjYXNlICdpbnNhbmUnOlxuXG4gICAgICBkaWZmaWN1bHR5SW5zYW5lKCk7XG4gICAgICBjb25zdCBpbnRlcnZhbEkgPSBzZXRJbnRlcnZhbChmdW5jdGlvbigpe1xuICAgICAgICBpZiAod2luQ29uZGl0aW9uID49IDEwICkge1xuICAgICAgICAgIGFsZXJ0KCdZb3UgYmVhdCB0aGUgZ2FtZSwgbGlrZSB5b3UgYmVhdCBpdCwgYmVhdCBpdCBlcm0geWVhaCwgZ3JhdHMgSSBndWVzcycpO1xuICAgICAgICAgIGNsZWFySW50ZXJ2YWwoaW50ZXJ2YWxJKTtcbiAgICAgICAgICByZXNldCgpO1xuICAgICAgICB9IGVsc2UgaWYgKCBsaWZlU2NvcmUgPD0gMCl7XG4gICAgICAgICAgYWxlcnQoJ0dhbWUgT3Zlciwgc29ycnkgeW91IGxvc3QsIEJvb29vb29vIScpO1xuICAgICAgICAgIHJlc2V0KCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgZGlmZmljdWx0eUluc2FuZSgpO1xuICAgICAgICB9XG4gICAgICB9LDI1MDApO1xuICAgICAgYnJlYWs7XG4gICAgICBkZWZhdWx0OlxuICAgICAgYWxlcnQoJ1BsZWFzZSBzZWxlY3QgYSBkaWZmaWN1bHR5Li4uJyk7XG4gICAgfVxuICB9KTtcbiAgLy8vIFRoaXMgaXMgdGhlIHZhbGlkYXRpb24gd2hlbiB0aGUgYnV0dG9uIGlzIGNsaWNrZWQgdG8gc3VibWl0IGFuIGFuc3dlciwgdGhpcyBhbHNvIGhvbGRzIHRoZSBhbmltYXRpb25zIGFwcGxpZWQgdG8gdGhlIGdhbWUuXG5cbiAgJCgnZm9ybScpLm9uKCdzdWJtaXQnLCBmdW5jdGlvbiAoZSkge1xuICAgIGUucHJldmVudERlZmF1bHQoKTtcblxuICAgICQoJy5hbmFncmFtJykuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICBjb25zdCBjaGVja2VyID0gJCh0aGlzKS5kYXRhKCd3b3JkJyk7XG5cbiAgICAgIGlmICgkKCcjYW5zd2VyJykudmFsKCkgPT09IGNoZWNrZXIpe1xuICAgICAgICAkd2luQ29uZGl0aW9uLmh0bWwoYENvcnJlY3QgQW5zd2VyczogJHt3aW5Db25kaXRpb24gPSB3aW5Db25kaXRpb24gKyAxfWApO1xuICAgICAgICAkKHRoaXMpLmFkZENsYXNzKCdhbmltYXRlZCBmYWRlT3V0TGVmdCcpLmNzcygnY29sb3InLCdncmVlbicpO1xuICAgICAgICAkKHRoaXMpLmNzcygnZGlzcGxheScsJ2hpZGRlbicpO1xuICAgICAgICAvLyAkY3VycmVudFNjb3JlLmh0bWwoYFNjb3JlOiAke2N1cnJlbnRTY29yZURpc2xwYXllZCArPSA1fWApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgJCgnLmFuYWdyYW0nKS5hZGRDbGFzcygnYW5pbWF0ZWQgd29iYmxlJyk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgJCgnZm9ybScpLnRyaWdnZXIoJ3Jlc2V0Jyk7XG4gIH0pO1xufSk7XG5cbi8vLy8vIGxvc2UgYSBsaWZlIGZvciB3b3JkcyBmYWxsaW5nIG9uIGJvdHRvbSBvZiB0aGUgZGl2IHBsYWNlIHRoaXMgaW4gYSBmdW5jdGlvbiBhbmQgdGhlbiBjYWxsIGl0IGluIGVhY2ggZGlmZmljdWx0eVxuIl19
